\input{src/header}
\graphicspath{ {./src/} } 
\usepackage{hyperref}

\newcommand{\dozent}{Volker Roth}
\newcommand{\tutor}{Oliver Wiese}
\newcommand{\tutoriumNo}{02\\Materialien: Latex, VSC, Skript}
\newcommand{\ubungNo}{03}
\newcommand{\veranstaltung}{Rechnersicherheit}
\newcommand{\semester}{SoSe 21}

% /////////////////////// BEGIN DOKUMENT /////////////////////////
\begin{document}
\input{src/titlepage}

% /////////////////////// Task 1 /////////////////////////
\section{Markov Generator}
\begin{enumerate}[(a)]
    % /////////////////////// a /////////////////////////
    \item {\itshape Construct a first-order Markov model for this sample.}
    \begin{itemize}
        \item We implemented a simply python code to construct a first and second order Markov model for this sample. Here is a snippet of the code:
        \lstinputlisting[language=python,linerange={1-30}]{src/u4/markov.py}
        \item And here is the result:
        \lstinputlisting[language=python,linerange={1-19}]{src/u4/markov.json}
    \end{itemize}
    % /////////////////////// b /////////////////////////
    \item {\itshape Construct a second-order Markov model for this sample}
   \begin{itemize}
       \lstinputlisting[language=python,linerange={19-51}]{src/u4/markov.json}
   \end{itemize}

    % /////////////////////// c /////////////////////////
    \item {\itshape Give one 4-digit PIN number that is generated by your first-order Markov model but not by your second-order model and calculate itâ€™s probability.}
    \begin{itemize}
        \item 4-digit PIN: 1233 as 123 is not reachable in the second Markov model.
        \item Probability:  $\frac{6}{10} \cdot \frac{2}{9} \cdot \frac{4}{8} \cdot \frac{4}{16} = \frac{192}{11520} = \frac{1}{60} $
    \end{itemize}
   
    
\end{enumerate}

% /////////////////////// Task 2 /////////////////////////
\section{Project}


 \begin{enumerate}[(a)]
    % /////////////////////// a /////////////////////////
    \item {\itshape A client can create a new user and chose a password. You do not have to implement password reset or changing the password.}
    
    % /////////////////////// b /////////////////////////
    \item {\itshape A user can login with a given username and password.}


    % /////////////////////// c /////////////////////////
    \item {\itshape Only authenticated clients can send or receive messages.}
    \begin{itemize}
        \item Authentication code for server:
        \lstinputlisting[language=python,linerange={9},basicstyle=\scriptsize]{src/u4/authentication_server.py}
        \newpage
        \item Authentication code for client:
        \lstinputlisting[language=python,linerange={7},basicstyle=\scriptsize]{src/u4/authentication_client.py}
    \end{itemize}
    \newline \includegraphics[width=1\linewidth]{src/u4/output.png}

    % /////////////////////// d /////////////////////////
    \item {\itshape The password-information are stored in a file.}
    \begin{itemize}
        \item We stored them using the pickle module. The modules stores data in bytes, so the file containing the password-information is 'sadly' not readable by humans. 
    \end{itemize}
    
\end{enumerate}

\\But before implementing your password-based authentication you should document the following problems:
\begin{enumerate}[(a)]
    % /////////////////////// a /////////////////////////
    \item {\itshape Think  about  possible  pitfalls  when  implementing  password-based  authentication. List all of your pitfalls.}
    % /////////////////////// b /////////////////////////
    \item {\itshape Describe briefly how to avoid your pitfalls.}
    
    \begin{itemize}
        \item Pitfalls: 
        \begin{enumerate}[1.]
            \item The account credentials have to be stored. When some hacker gets access to the file containing the credentials. He would have access to all the accounts (passwords, usernames .etc)
            \begin{itemize}
                \item How we avoided it: We didn't store the passwords plain in a txt file, but we hashed them.
            \end{itemize}
            
            \item Rainbow tables can be used.
            \begin{itemize}
                \item How we avoided it: Before hashing the passwords we made use of a salt, and saved the salt afterwards together with the password in the credentials file. 
            \end{itemize}
            
            \item The hacker could just brute force it (like we did in exercise 2) or use a dictionary attack.
            \begin{itemize}
                \item How we avoided it: We used a random hash for every password, increasing the time to brute force it by a lot.
            \end{itemize}
            
            \item Even if it takes long, it can still be brute forced (or a dictionary attack can be used).
            \begin{itemize}
                \item How we avoided it: Instead of just using salt, we also used pepper, which is not stored with the file, which makes the chance to crack the password negligible
            \end{itemize}
            
            \item Instead of trying to steal the password file, the hacker could just brute force / dictionary attack our authentication (login) service.
            \begin{itemize}
                \item How we are going to avoid it (not yet implemented): We will setup a strong password policy.
                \item We will limit the amount of times one user (IP) can try to login.
            \end{itemize}
            
        \end{enumerate}
    \end{itemize}

    % /////////////////////// c /////////////////////////
    \item {\itshape If you searched for password-based authentication, describe your search and results. What was helpful and what was dangerous?}
    \begin{itemize}
        \item Helpful:
        \begin{itemize}
            \item Many sources advised to use bcrypt instead of SHA256-crypt, as it is stronger against brute force.
        \end{itemize}
        \item Dangerous:
        \begin{itemize}
            \item Some sources advised to use an unsafe kind to store passwords. Like storing them plain or just with hash without a salt and pepper.
        \end{itemize}
    \end{itemize}

\end{enumerate}




\end{document}